pipeline {
    agent any
    parameters {
        choice(name:'profileName', choices:['Qaclick','Google'],description:'click on the profile name')
    }
    tools {

       jdk 'Java 8'
       maven 'Maven 3.6.3'
     }

     stages {
         stage('Checkout') {
             steps  {
                
                git 'https://github.com/Suman-arch/fourth.git'
                   
                     }
                            }
        
        stage('Clean') {
             steps  {
                
                bat "mvn -Dmaven.test.failure.ignore=true clean "
                   
                     }
                            }
                            
           stage('Compile') {
             steps  {
                
                bat "mvn -Dmaven.test.failure.ignore=true compile "
                   
                     }
                            }                 


          stage('Test') {
             steps  {
                
                bat "mvn -Dmaven.test.failure.ignore=true test -P${params.profileName} "
                   
                    }
                          }
                          
         stage('Download') {
            steps {
            
            echo "Sending email "
                  }
                           }
       }
       post {
        success {
                  emailext attachLog: true, body:
                  """<p>EXECUTED: Job <b>\'${env.JOB_NAME}:${env.BUILD_NUMBER})\'
                  </b></p><p>View console output at "<a href="${env.BUILD_URL}"> 
                  ${env.JOB_NAME}:${env.BUILD_NUMBER}</a>"</p> 
                  <p><i>(Build log is attached.)</i></p>""", 
                  compressLog: true,
                  recipientProviders: [[$class: 'RequesterRecipientProvider']], 
                  replyTo: 'abhishek260297@gmail.com', 
                  subject: '${currentBuild.currentResult}',
                  Job '${env.JOB_NAME}:${env.BUILD_NUMBER}'
                 
}
}
}
